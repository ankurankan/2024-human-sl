<!DOCTYPE html>
<html>
	<head>
		<title>Embedding DAGitty: Example 1</title>
		<script type="text/javascript" src="https://dagitty.net/lib/dagitty-3.0.js"></script>

<script>

function getEdgeDOM( u , v, dir ){
	let ekv = DAGitty.controllers[0].getView().edge_shapes.kv
	let eid = `${u}\u0000${v}\u0000${dir}`
	if( ekv[eid] ) {
		return ekv[eid].dom.firstChild
	} else {
		return null
	}
}

async function send(){
	const a = await fetch('http://127.0.0.1:8000/simpletest')
	const b = await a.json()
	for( let e of b ){
		let edom = getEdgeDOM( e.u, e.v, 0 + (e.edge == "TRUE") )
		if( edom ){ 
			// draw edge in appropriate color
			edom.style.strokeWidth = parseFloat(e.cor)
		} else {
			// do nothing
		}
	}
}


</script>
	</head>
	<body onload="DAGitty.setup()">
		<h1>A webpage with an embedded DAG</h1>

<p>
<button onclick="send()">send</button>
</p>

		<div class="dagitty" style="width:500px; height: 300px">
dag {
M [pos="0.423,0.755"]
X [exposure,pos="-1.193,1.639"]
Y [outcome,pos="1.053,1.639"]
X -&gt; M -&gt; Y
X --  Y
}		</div>

	</body>
</html>
